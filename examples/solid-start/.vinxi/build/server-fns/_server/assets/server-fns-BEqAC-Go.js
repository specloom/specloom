import{lazy as yr,createComponent as br,sharedConfig as mt}from"solid-js";import{ssrElement as re,escape as wr,mergeProps as vr,ssr as Sr,getRequestEvent as Rr,isServer as Er,renderToString as xr}from"solid-js/web";import{provideRequestEvent as gt}from"solid-js/web/storage";import{H3Event as Se,setHeader as kr,appendResponseHeader as Ar,getRequestIP as $r,parseCookies as _r,getResponseStatus as zr,getResponseStatusText as Cr,getCookie as Pr,setCookie as Ir,getResponseHeader as Tr,setResponseHeader as Or,removeResponseHeader as Nr,getResponseHeaders as Lr,getRequestURL as jr,getRequestWebStream as Fr,setResponseStatus as Ur,eventHandler as Hr}from"h3";import{AsyncLocalStorage as Dr}from"node:async_hooks";function qr(e,t){const r=(e||"").split(";").filter(c=>typeof c=="string"&&!!c.trim()),n=r.shift()||"",a=Mr(n),i=a.name;let o=a.value;try{o=t?.decode===!1?o:(t?.decode||decodeURIComponent)(o)}catch{}const u={name:i,value:o};for(const c of r){const l=c.split("="),p=(l.shift()||"").trimStart().toLowerCase(),d=l.join("=");switch(p){case"expires":{u.expires=new Date(d);break}case"max-age":{u.maxAge=Number.parseInt(d,10);break}case"secure":{u.secure=!0;break}case"httponly":{u.httpOnly=!0;break}case"samesite":{u.sameSite=d;break}default:u[p]=d}}return u}function Mr(e){let t="",r="";const n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}var Br=(e=>(e[e.AggregateError=1]="AggregateError",e[e.ArrowFunction=2]="ArrowFunction",e[e.ErrorPrototypeStack=4]="ErrorPrototypeStack",e[e.ObjectAssign=8]="ObjectAssign",e[e.BigIntTypedArray=16]="BigIntTypedArray",e[e.RegExp=32]="RegExp",e))(Br||{}),k=Symbol.asyncIterator,yt=Symbol.hasInstance,U=Symbol.isConcatSpreadable,A=Symbol.iterator,bt=Symbol.match,wt=Symbol.matchAll,vt=Symbol.replace,St=Symbol.search,Rt=Symbol.species,Et=Symbol.split,xt=Symbol.toPrimitive,H=Symbol.toStringTag,kt=Symbol.unscopables,Vr={0:"Symbol.asyncIterator",1:"Symbol.hasInstance",2:"Symbol.isConcatSpreadable",3:"Symbol.iterator",4:"Symbol.match",5:"Symbol.matchAll",6:"Symbol.replace",7:"Symbol.search",8:"Symbol.species",9:"Symbol.split",10:"Symbol.toPrimitive",11:"Symbol.toStringTag",12:"Symbol.unscopables"},At={[k]:0,[yt]:1,[U]:2,[A]:3,[bt]:4,[wt]:5,[vt]:6,[St]:7,[Rt]:8,[Et]:9,[xt]:10,[H]:11,[kt]:12},Wr={0:k,1:yt,2:U,3:A,4:bt,5:wt,6:vt,7:St,8:Rt,9:Et,10:xt,11:H,12:kt},Xr={2:"!0",3:"!1",1:"void 0",0:"null",4:"-0",5:"1/0",6:"-1/0",7:"0/0"},s=void 0,Gr={2:!0,3:!1,1:s,0:null,4:-0,5:Number.POSITIVE_INFINITY,6:Number.NEGATIVE_INFINITY,7:Number.NaN},$t={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"},Yr={0:Error,1:EvalError,2:RangeError,3:ReferenceError,4:SyntaxError,5:TypeError,6:URIError};function m(e,t,r,n,a,i,o,u,c,l,p,d){return{t:e,i:t,s:r,c:n,m:a,p:i,e:o,a:u,f:c,b:l,o:p,l:d}}function z(e){return m(2,s,e,s,s,s,s,s,s,s,s,s)}var _t=z(2),zt=z(3),Jr=z(1),Kr=z(0),Zr=z(4),Qr=z(5),en=z(6),tn=z(7);function rn(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return s}}function x(e){let t="",r=0,n;for(let a=0,i=e.length;a<i;a++)n=rn(e[a]),n&&(t+=e.slice(r,a)+n,r=a+1);return r===0?t=e:t+=e.slice(r),t}function nn(e){switch(e){case"\\\\":return"\\";case'\\"':return'"';case"\\n":return`
`;case"\\r":return"\r";case"\\b":return"\b";case"\\t":return"	";case"\\f":return"\f";case"\\x3C":return"<";case"\\u2028":return"\u2028";case"\\u2029":return"\u2029";default:return e}}function O(e){return e.replace(/(\\\\|\\"|\\n|\\r|\\b|\\t|\\f|\\u2028|\\u2029|\\x3C)/g,nn)}var V="__SEROVAL_REFS__",ie="$R",ne=`self.${ie}`;function sn(e){return e==null?`${ne}=${ne}||[]`:`(${ne}=${ne}||{})["${x(e)}"]=[]`}var Ct=new Map,F=new Map;function Pt(e){return Ct.has(e)}function an(e){return F.has(e)}function on(e){if(Pt(e))return Ct.get(e);throw new Nn(e)}function un(e){if(an(e))return F.get(e);throw new Ln(e)}typeof globalThis<"u"?Object.defineProperty(globalThis,V,{value:F,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,V,{value:F,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,V,{value:F,configurable:!0,writable:!1,enumerable:!1}):typeof global<"u"&&Object.defineProperty(global,V,{value:F,configurable:!0,writable:!1,enumerable:!1});function Te(e){return e instanceof EvalError?1:e instanceof RangeError?2:e instanceof ReferenceError?3:e instanceof SyntaxError?4:e instanceof TypeError?5:e instanceof URIError?6:0}function cn(e){let t=$t[Te(e)];return e.name!==t?{name:e.name}:e.constructor.name!==t?{name:e.constructor.name}:{}}function It(e,t){let r=cn(e),n=Object.getOwnPropertyNames(e);for(let a=0,i=n.length,o;a<i;a++)o=n[a],o!=="name"&&o!=="message"&&(o==="stack"?t&4&&(r=r||{},r[o]=e[o]):(r=r||{},r[o]=e[o]));return r}function Tt(e){return Object.isFrozen(e)?3:Object.isSealed(e)?2:Object.isExtensible(e)?0:1}function ln(e){switch(e){case Number.POSITIVE_INFINITY:return Qr;case Number.NEGATIVE_INFINITY:return en}return e!==e?tn:Object.is(e,-0)?Zr:m(0,s,e,s,s,s,s,s,s,s,s,s)}function Ot(e){return m(1,s,x(e),s,s,s,s,s,s,s,s,s)}function fn(e){return m(3,s,""+e,s,s,s,s,s,s,s,s,s)}function pn(e){return m(4,e,s,s,s,s,s,s,s,s,s,s)}function dn(e,t){let r=t.valueOf();return m(5,e,r!==r?"":t.toISOString(),s,s,s,s,s,s,s,s,s)}function hn(e,t){return m(6,e,s,x(t.source),t.flags,s,s,s,s,s,s,s)}function mn(e,t){return m(17,e,At[t],s,s,s,s,s,s,s,s,s)}function gn(e,t){return m(18,e,x(on(t)),s,s,s,s,s,s,s,s,s)}function Nt(e,t,r){return m(25,e,r,x(t),s,s,s,s,s,s,s,s)}function yn(e,t,r){return m(9,e,s,s,s,s,s,r,s,s,Tt(t),s)}function bn(e,t){return m(21,e,s,s,s,s,s,s,t,s,s,s)}function wn(e,t,r){return m(15,e,s,t.constructor.name,s,s,s,s,r,t.byteOffset,s,t.length)}function vn(e,t,r){return m(16,e,s,t.constructor.name,s,s,s,s,r,t.byteOffset,s,t.byteLength)}function Sn(e,t,r){return m(20,e,s,s,s,s,s,s,r,t.byteOffset,s,t.byteLength)}function Rn(e,t,r){return m(13,e,Te(t),s,x(t.message),r,s,s,s,s,s,s)}function En(e,t,r){return m(14,e,Te(t),s,x(t.message),r,s,s,s,s,s,s)}function xn(e,t){return m(7,e,s,s,s,s,s,t,s,s,s,s)}function kn(e,t){return m(28,s,s,s,s,s,s,[e,t],s,s,s,s)}function An(e,t){return m(30,s,s,s,s,s,s,[e,t],s,s,s,s)}function $n(e,t,r){return m(31,e,s,s,s,s,s,r,t,s,s,s)}function _n(e,t){return m(32,e,s,s,s,s,s,s,t,s,s,s)}function zn(e,t){return m(33,e,s,s,s,s,s,s,t,s,s,s)}function Cn(e,t){return m(34,e,s,s,s,s,s,s,t,s,s,s)}var Pn={parsing:1,serialization:2,deserialization:3};function In(e){return`Seroval Error (step: ${Pn[e]})`}var Tn=(e,t)=>In(e),Lt=class extends Error{constructor(e,t){super(Tn(e)),this.cause=t}},Be=class extends Lt{constructor(e){super("parsing",e)}},On=class extends Lt{constructor(e){super("deserialization",e)}};function $(e){return`Seroval Error (specific: ${e})`}var ce=class extends Error{constructor(e){super($(1)),this.value=e}},N=class extends Error{constructor(e){super($(2))}},jt=class extends Error{constructor(e){super($(3))}},Q=class extends Error{constructor(e){super($(4))}},Nn=class extends Error{constructor(e){super($(5)),this.value=e}},Ln=class extends Error{constructor(e){super($(6))}},jn=class extends Error{constructor(e){super($(7))}},C=class extends Error{constructor(t){super($(8))}},Ft=class extends Error{constructor(t){super($(9))}},Fn=class{constructor(t,r){this.value=t,this.replacement=r}},le=()=>{let e={p:0,s:0,f:0};return e.p=new Promise((t,r)=>{e.s=t,e.f=r}),e},Un=(e,t)=>{e.s(t),e.p.s=1,e.p.v=t},Hn=(e,t)=>{e.f(t),e.p.s=2,e.p.v=t},Dn=le.toString(),qn=Un.toString(),Mn=Hn.toString(),Ut=()=>{let e=[],t=[],r=!0,n=!1,a=0,i=(c,l,p)=>{for(p=0;p<a;p++)t[p]&&t[p][l](c)},o=(c,l,p,d)=>{for(l=0,p=e.length;l<p;l++)d=e[l],!r&&l===p-1?c[n?"return":"throw"](d):c.next(d)},u=(c,l)=>(r&&(l=a++,t[l]=c),o(c),()=>{r&&(t[l]=t[a],t[a--]=void 0)});return{__SEROVAL_STREAM__:!0,on:c=>u(c),next:c=>{r&&(e.push(c),i(c,"next"))},throw:c=>{r&&(e.push(c),i(c,"throw"),r=!1,n=!1,t.length=0)},return:c=>{r&&(e.push(c),i(c,"return"),r=!1,n=!0,t.length=0)}}},Bn=Ut.toString(),Ht=e=>t=>()=>{let r=0,n={[e]:()=>n,next:()=>{if(r>t.d)return{done:!0,value:void 0};let a=r++,i=t.v[a];if(a===t.t)throw i;return{done:a===t.d,value:i}}};return n},Vn=Ht.toString(),Dt=(e,t)=>r=>()=>{let n=0,a=-1,i=!1,o=[],u=[],c=(p=0,d=u.length)=>{for(;p<d;p++)u[p].s({done:!0,value:void 0})};r.on({next:p=>{let d=u.shift();d&&d.s({done:!1,value:p}),o.push(p)},throw:p=>{let d=u.shift();d&&d.f(p),c(),a=o.length,i=!0,o.push(p)},return:p=>{let d=u.shift();d&&d.s({done:!0,value:p}),c(),a=o.length,o.push(p)}});let l={[e]:()=>l,next:()=>{if(a===-1){let v=n++;if(v>=o.length){let f=t();return u.push(f),f.p}return{done:!1,value:o[v]}}if(n>a)return{done:!0,value:void 0};let p=n++,d=o[p];if(p!==a)return{done:!1,value:d};if(i)throw d;return{done:!0,value:d}}};return l},Wn=Dt.toString(),qt=e=>{let t=atob(e),r=t.length,n=new Uint8Array(r);for(let a=0;a<r;a++)n[a]=t.charCodeAt(a);return n.buffer},Xn=qt.toString(),Gn={},Yn={},Jn={0:{},1:{},2:{},3:{},4:{},5:{}},Kn={0:"[]",1:Dn,2:qn,3:Mn,4:Bn,5:Xn};function fe(e){return"__SEROVAL_STREAM__"in e}function ee(){return Ut()}function Zn(e){let t=ee(),r=e[k]();async function n(){try{let a=await r.next();a.done?t.return(a.value):(t.next(a.value),await n())}catch(a){t.throw(a)}}return n().catch(()=>{}),t}var Qn=Dt(k,le);function es(e){return Qn(e)}function ts(e){let t=[],r=-1,n=-1,a=e[A]();for(;;)try{let i=a.next();if(t.push(i.value),i.done){n=t.length-1;break}}catch(i){r=t.length,t.push(i)}return{v:t,t:r,d:n}}var rs=Ht(A);function ns(e){return rs(e)}function ss(e,t){return{plugins:t.plugins,mode:e,marked:new Set,features:63^(t.disabledFeatures||0),refs:t.refs||new Map,depthLimit:t.depthLimit||1e3}}function as(e,t){e.marked.add(t)}function Mt(e,t){let r=e.refs.size;return e.refs.set(t,r),r}function pe(e,t){let r=e.refs.get(t);return r!=null?(as(e,r),{type:1,value:pn(r)}):{type:0,value:Mt(e,t)}}function Oe(e,t){let r=pe(e,t);return r.type===1?r:Pt(t)?{type:2,value:gn(r.value,t)}:r}function P(e,t){let r=Oe(e,t);if(r.type!==0)return r.value;if(t in At)return mn(r.value,t);throw new ce(t)}function L(e,t){let r=pe(e,Jn[t]);return r.type===1?r.value:m(26,r.value,t,s,s,s,s,s,s,s,s,s)}function is(e){let t=pe(e,Gn);return t.type===1?t.value:m(27,t.value,s,s,s,s,s,s,P(e,A),s,s,s)}function os(e){let t=pe(e,Yn);return t.type===1?t.value:m(29,t.value,s,s,s,s,s,[L(e,1),P(e,k)],s,s,s,s)}function us(e,t,r,n){return m(r?11:10,e,s,s,s,n,s,s,s,s,Tt(t),s)}function cs(e,t,r,n){return m(8,t,s,s,s,s,{k:r,v:n},s,L(e,0),s,s,s)}function ls(e,t,r){return m(22,t,r,s,s,s,s,s,L(e,1),s,s,s)}function fs(e,t,r){let n=new Uint8Array(r),a="";for(let i=0,o=n.length;i<o;i++)a+=String.fromCharCode(n[i]);return m(19,t,x(btoa(a)),s,s,s,s,s,L(e,5),s,s,s)}var ps=(e=>(e[e.Vanilla=1]="Vanilla",e[e.Cross=2]="Cross",e))(ps||{});function Bt(e,t){for(let r=0,n=t.length;r<n;r++){let a=t[r];e.has(a)||(e.add(a),a.extends&&Bt(e,a.extends))}}function Vt(e){if(e){let t=new Set;return Bt(t,e),[...t]}}function ds(e){switch(e){case"Int8Array":return Int8Array;case"Int16Array":return Int16Array;case"Int32Array":return Int32Array;case"Uint8Array":return Uint8Array;case"Uint16Array":return Uint16Array;case"Uint32Array":return Uint32Array;case"Uint8ClampedArray":return Uint8ClampedArray;case"Float32Array":return Float32Array;case"Float64Array":return Float64Array;case"BigInt64Array":return BigInt64Array;case"BigUint64Array":return BigUint64Array;default:throw new jn(e)}}var hs=1e6,ms=1e4,gs=2e4;function Wt(e,t){switch(t){case 3:return Object.freeze(e);case 1:return Object.preventExtensions(e);case 2:return Object.seal(e);default:return e}}var ys=1e3;function bs(e,t){var r;return{mode:e,plugins:t.plugins,refs:t.refs||new Map,features:(r=t.features)!=null?r:63^(t.disabledFeatures||0),depthLimit:t.depthLimit||ys}}function ws(e){return{mode:1,base:bs(1,e),child:s,state:{marked:new Set(e.markedRefs)}}}var vs=class{constructor(e,t){this._p=e,this.depth=t}deserialize(e){return y(this._p,this.depth,e)}};function Xt(e,t){if(t<0||!Number.isFinite(t)||!Number.isInteger(t))throw new C({t:4,i:t});if(e.refs.has(t))throw new Error("Conflicted ref id: "+t)}function Ss(e,t,r){return Xt(e.base,t),e.state.marked.has(t)&&e.base.refs.set(t,r),r}function Rs(e,t,r){return Xt(e.base,t),e.base.refs.set(t,r),r}function b(e,t,r){return e.mode===1?Ss(e,t,r):Rs(e,t,r)}function Re(e,t,r){if(Object.hasOwn(t,r))return t[r];throw new C(e)}function Es(e,t){return b(e,t.i,un(O(t.s)))}function xs(e,t,r){let n=r.a,a=n.length,i=b(e,r.i,new Array(a));for(let o=0,u;o<a;o++)u=n[o],u&&(i[o]=y(e,t,u));return Wt(i,r.o),i}function ks(e){switch(e){case"constructor":case"__proto__":case"prototype":case"__defineGetter__":case"__defineSetter__":case"__lookupGetter__":case"__lookupSetter__":return!1;default:return!0}}function As(e){switch(e){case k:case U:case H:case A:return!0;default:return!1}}function Ve(e,t,r){ks(t)?e[t]=r:Object.defineProperty(e,t,{value:r,configurable:!0,enumerable:!0,writable:!0})}function $s(e,t,r,n,a){if(typeof n=="string")Ve(r,n,y(e,t,a));else{let i=y(e,t,n);switch(typeof i){case"string":Ve(r,i,y(e,t,a));break;case"symbol":As(i)&&(r[i]=y(e,t,a));break;default:throw new C(n)}}}function Gt(e,t,r,n){let a=r.k;if(a.length>0)for(let i=0,o=r.v,u=a.length;i<u;i++)$s(e,t,n,a[i],o[i]);return n}function _s(e,t,r){let n=b(e,r.i,r.t===10?{}:Object.create(null));return Gt(e,t,r.p,n),Wt(n,r.o),n}function zs(e,t){return b(e,t.i,new Date(t.s))}function Cs(e,t){if(e.base.features&32){let r=O(t.c);if(r.length>gs)throw new C(t);return b(e,t.i,new RegExp(r,t.m))}throw new N(t)}function Ps(e,t,r){let n=b(e,r.i,new Set);for(let a=0,i=r.a,o=i.length;a<o;a++)n.add(y(e,t,i[a]));return n}function Is(e,t,r){let n=b(e,r.i,new Map);for(let a=0,i=r.e.k,o=r.e.v,u=i.length;a<u;a++)n.set(y(e,t,i[a]),y(e,t,o[a]));return n}function Ts(e,t){if(t.s.length>hs)throw new C(t);return b(e,t.i,qt(O(t.s)))}function Os(e,t,r){var n;let a=ds(r.c),i=y(e,t,r.f),o=(n=r.b)!=null?n:0;if(o<0||o>i.byteLength)throw new C(r);return b(e,r.i,new a(i,o,r.l))}function Ns(e,t,r){var n;let a=y(e,t,r.f),i=(n=r.b)!=null?n:0;if(i<0||i>a.byteLength)throw new C(r);return b(e,r.i,new DataView(a,i,r.l))}function Yt(e,t,r,n){if(r.p){let a=Gt(e,t,r.p,{});Object.defineProperties(n,Object.getOwnPropertyDescriptors(a))}return n}function Ls(e,t,r){let n=b(e,r.i,new AggregateError([],O(r.m)));return Yt(e,t,r,n)}function js(e,t,r){let n=Re(r,Yr,r.s),a=b(e,r.i,new n(O(r.m)));return Yt(e,t,r,a)}function Fs(e,t,r){let n=le(),a=b(e,r.i,n.p),i=y(e,t,r.f);return r.s?n.s(i):n.f(i),a}function Us(e,t,r){return b(e,r.i,Object(y(e,t,r.f)))}function Hs(e,t,r){let n=e.base.plugins;if(n){let a=O(r.c);for(let i=0,o=n.length;i<o;i++){let u=n[i];if(u.tag===a)return b(e,r.i,u.deserialize(r.s,new vs(e,t),{id:r.i}))}}throw new jt(r.c)}function Ds(e,t){return b(e,t.i,b(e,t.s,le()).p)}function qs(e,t,r){let n=e.base.refs.get(r.i);if(n)return n.s(y(e,t,r.a[1])),s;throw new Q("Promise")}function Ms(e,t,r){let n=e.base.refs.get(r.i);if(n)return n.f(y(e,t,r.a[1])),s;throw new Q("Promise")}function Bs(e,t,r){y(e,t,r.a[0]);let n=y(e,t,r.a[1]);return ns(n)}function Vs(e,t,r){y(e,t,r.a[0]);let n=y(e,t,r.a[1]);return es(n)}function Ws(e,t,r){let n=b(e,r.i,ee()),a=r.a,i=a.length;if(i)for(let o=0;o<i;o++)y(e,t,a[o]);return n}function Xs(e,t,r){let n=e.base.refs.get(r.i);if(n&&fe(n))return n.next(y(e,t,r.f)),s;throw new Q("Stream")}function Gs(e,t,r){let n=e.base.refs.get(r.i);if(n&&fe(n))return n.throw(y(e,t,r.f)),s;throw new Q("Stream")}function Ys(e,t,r){let n=e.base.refs.get(r.i);if(n&&fe(n))return n.return(y(e,t,r.f)),s;throw new Q("Stream")}function Js(e,t,r){return y(e,t,r.f),s}function Ks(e,t,r){return y(e,t,r.a[1]),s}function y(e,t,r){if(t>e.base.depthLimit)throw new Ft(e.base.depthLimit);switch(t+=1,r.t){case 2:return Re(r,Gr,r.s);case 0:return Number(r.s);case 1:return O(String(r.s));case 3:if(String(r.s).length>ms)throw new C(r);return BigInt(r.s);case 4:return e.base.refs.get(r.i);case 18:return Es(e,r);case 9:return xs(e,t,r);case 10:case 11:return _s(e,t,r);case 5:return zs(e,r);case 6:return Cs(e,r);case 7:return Ps(e,t,r);case 8:return Is(e,t,r);case 19:return Ts(e,r);case 16:case 15:return Os(e,t,r);case 20:return Ns(e,t,r);case 14:return Ls(e,t,r);case 13:return js(e,t,r);case 12:return Fs(e,t,r);case 17:return Re(r,Wr,r.s);case 21:return Us(e,t,r);case 25:return Hs(e,t,r);case 22:return Ds(e,r);case 23:return qs(e,t,r);case 24:return Ms(e,t,r);case 28:return Bs(e,t,r);case 30:return Vs(e,t,r);case 31:return Ws(e,t,r);case 32:return Xs(e,t,r);case 33:return Gs(e,t,r);case 34:return Ys(e,t,r);case 27:return Js(e,t,r);case 29:return Ks(e,t,r);default:throw new N(r)}}function Zs(e,t){try{return y(e,0,t)}catch(r){throw new On(r)}}var Qs=()=>T,ea=Qs.toString(),Jt=/=>/.test(ea);function Kt(e,t){return Jt?(e.length===1?e[0]:"("+e.join(",")+")")+"=>"+(t.startsWith("{")?"("+t+")":t):"function("+e.join(",")+"){return "+t+"}"}function ta(e,t){return Jt?(e.length===1?e[0]:"("+e.join(",")+")")+"=>{"+t+"}":"function("+e.join(",")+"){"+t+"}"}var Zt="hjkmoquxzABCDEFGHIJKLNPQRTUVWXYZ$_",We=Zt.length,Qt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$_",Xe=Qt.length;function ra(e){let t=e%We,r=Zt[t];for(e=(e-t)/We;e>0;)t=e%Xe,r+=Qt[t],e=(e-t)/Xe;return r}var na=/^[$A-Z_][0-9A-Z_$]*$/i;function er(e){let t=e[0];return(t==="$"||t==="_"||t>="A"&&t<="Z"||t>="a"&&t<="z")&&na.test(e)}function W(e){switch(e.t){case 0:return e.s+"="+e.v;case 2:return e.s+".set("+e.k+","+e.v+")";case 1:return e.s+".add("+e.v+")";case 3:return e.s+".delete("+e.k+")"}}function sa(e){let t=[],r=e[0];for(let n=1,a=e.length,i,o=r;n<a;n++)i=e[n],i.t===0&&i.v===o.v?r={t:0,s:i.s,k:s,v:W(r)}:i.t===2&&i.s===o.s?r={t:2,s:W(r),k:i.k,v:i.v}:i.t===1&&i.s===o.s?r={t:1,s:W(r),k:s,v:i.v}:i.t===3&&i.s===o.s?r={t:3,s:W(r),k:i.k,v:s}:(t.push(r),r=i),o=i;return t.push(r),t}function tr(e){if(e.length){let t="",r=sa(e);for(let n=0,a=r.length;n<a;n++)t+=W(r[n])+",";return t}return s}var aa="Object.create(null)",ia="new Set",oa="new Map",ua="Promise.resolve",ca="Promise.reject",la={3:"Object.freeze",2:"Object.seal",1:"Object.preventExtensions",0:s};function fa(e,t){return{mode:e,plugins:t.plugins,features:t.features,marked:new Set(t.markedRefs),stack:[],flags:[],assignments:[]}}function pa(e){return{mode:2,base:fa(2,e),state:e,child:s}}var da=class{constructor(e){this._p=e}serialize(e){return h(this._p,e)}};function ha(e,t){let r=e.valid.get(t);r==null&&(r=e.valid.size,e.valid.set(t,r));let n=e.vars[r];return n==null&&(n=ra(r),e.vars[r]=n),n}function ma(e){return ie+"["+e+"]"}function g(e,t){return e.mode===1?ha(e.state,t):ma(t)}function E(e,t){e.marked.add(t)}function Ee(e,t){return e.marked.has(t)}function Ne(e,t,r){t!==0&&(E(e.base,r),e.base.flags.push({type:t,value:g(e,r)}))}function ga(e){let t="";for(let r=0,n=e.flags,a=n.length;r<a;r++){let i=n[r];t+=la[i.type]+"("+i.value+"),"}return t}function ya(e){let t=tr(e.assignments),r=ga(e);return t?r?t+r:t:r}function rr(e,t,r){e.assignments.push({t:0,s:t,k:s,v:r})}function ba(e,t,r){e.base.assignments.push({t:1,s:g(e,t),k:s,v:r})}function B(e,t,r,n){e.base.assignments.push({t:2,s:g(e,t),k:r,v:n})}function Ge(e,t,r){e.base.assignments.push({t:3,s:g(e,t),k:r,v:s})}function Y(e,t,r,n){rr(e.base,g(e,t)+"["+r+"]",n)}function xe(e,t,r,n){rr(e.base,g(e,t)+"."+r,n)}function _(e,t){return t.t===4&&e.stack.includes(t.i)}function M(e,t,r){return e.mode===1&&!Ee(e.base,t)?r:g(e,t)+"="+r}function wa(e){return V+'.get("'+e.s+'")'}function Ye(e,t,r,n){return r?_(e.base,r)?(E(e.base,t),Y(e,t,n,g(e,r.i)),""):h(e,r):""}function va(e,t){let r=t.i,n=t.a,a=n.length;if(a>0){e.base.stack.push(r);let i=Ye(e,r,n[0],0),o=i==="";for(let u=1,c;u<a;u++)c=Ye(e,r,n[u],u),i+=","+c,o=c==="";return e.base.stack.pop(),Ne(e,t.o,t.i),"["+i+(o?",]":"]")}return"[]"}function Je(e,t,r,n){if(typeof r=="string"){let a=Number(r),i=a>=0&&a.toString()===r||er(r);if(_(e.base,n)){let o=g(e,n.i);return E(e.base,t.i),i&&a!==a?xe(e,t.i,r,o):Y(e,t.i,i?r:'"'+r+'"',o),""}return(i?r:'"'+r+'"')+":"+h(e,n)}return"["+h(e,r)+"]:"+h(e,n)}function nr(e,t,r){let n=r.k,a=n.length;if(a>0){let i=r.v;e.base.stack.push(t.i);let o=Je(e,t,n[0],i[0]);for(let u=1,c=o;u<a;u++)c=Je(e,t,n[u],i[u]),o+=(c&&o&&",")+c;return e.base.stack.pop(),"{"+o+"}"}return"{}"}function Sa(e,t){return Ne(e,t.o,t.i),nr(e,t,t.p)}function Ra(e,t,r,n){let a=nr(e,t,r);return a!=="{}"?"Object.assign("+n+","+a+")":n}function Ea(e,t,r,n,a){let i=e.base,o=h(e,a),u=Number(n),c=u>=0&&u.toString()===n||er(n);if(_(i,a))c&&u!==u?xe(e,t.i,n,o):Y(e,t.i,c?n:'"'+n+'"',o);else{let l=i.assignments;i.assignments=r,c&&u!==u?xe(e,t.i,n,o):Y(e,t.i,c?n:'"'+n+'"',o),i.assignments=l}}function xa(e,t,r,n,a){if(typeof n=="string")Ea(e,t,r,n,a);else{let i=e.base,o=i.stack;i.stack=[];let u=h(e,a);i.stack=o;let c=i.assignments;i.assignments=r,Y(e,t.i,h(e,n),u),i.assignments=c}}function ka(e,t,r){let n=r.k,a=n.length;if(a>0){let i=[],o=r.v;e.base.stack.push(t.i);for(let u=0;u<a;u++)xa(e,t,i,n[u],o[u]);return e.base.stack.pop(),tr(i)}return s}function Le(e,t,r){if(t.p){let n=e.base;if(n.features&8)r=Ra(e,t,t.p,r);else{E(n,t.i);let a=ka(e,t,t.p);if(a)return"("+M(e,t.i,r)+","+a+g(e,t.i)+")"}}return r}function Aa(e,t){return Ne(e,t.o,t.i),Le(e,t,aa)}function $a(e){return'new Date("'+e.s+'")'}function _a(e,t){if(e.base.features&32)return"/"+t.c+"/"+t.m;throw new N(t)}function Ke(e,t,r){let n=e.base;return _(n,r)?(E(n,t),ba(e,t,g(e,r.i)),""):h(e,r)}function za(e,t){let r=ia,n=t.a,a=n.length,i=t.i;if(a>0){e.base.stack.push(i);let o=Ke(e,i,n[0]);for(let u=1,c=o;u<a;u++)c=Ke(e,i,n[u]),o+=(c&&o&&",")+c;e.base.stack.pop(),o&&(r+="(["+o+"])")}return r}function Ze(e,t,r,n,a){let i=e.base;if(_(i,r)){let o=g(e,r.i);if(E(i,t),_(i,n)){let c=g(e,n.i);return B(e,t,o,c),""}if(n.t!==4&&n.i!=null&&Ee(i,n.i)){let c="("+h(e,n)+",["+a+","+a+"])";return B(e,t,o,g(e,n.i)),Ge(e,t,a),c}let u=i.stack;return i.stack=[],B(e,t,o,h(e,n)),i.stack=u,""}if(_(i,n)){let o=g(e,n.i);if(E(i,t),r.t!==4&&r.i!=null&&Ee(i,r.i)){let c="("+h(e,r)+",["+a+","+a+"])";return B(e,t,g(e,r.i),o),Ge(e,t,a),c}let u=i.stack;return i.stack=[],B(e,t,h(e,r),o),i.stack=u,""}return"["+h(e,r)+","+h(e,n)+"]"}function Ca(e,t){let r=oa,n=t.e.k,a=n.length,i=t.i,o=t.f,u=g(e,o.i),c=e.base;if(a>0){let l=t.e.v;c.stack.push(i);let p=Ze(e,i,n[0],l[0],u);for(let d=1,v=p;d<a;d++)v=Ze(e,i,n[d],l[d],u),p+=(v&&p&&",")+v;c.stack.pop(),p&&(r+="(["+p+"])")}return o.t===26&&(E(c,o.i),r="("+h(e,o)+","+r+")"),r}function Pa(e,t){return j(e,t.f)+'("'+t.s+'")'}function Ia(e,t){return"new "+t.c+"("+h(e,t.f)+","+t.b+","+t.l+")"}function Ta(e,t){return"new DataView("+h(e,t.f)+","+t.b+","+t.l+")"}function Oa(e,t){let r=t.i;e.base.stack.push(r);let n=Le(e,t,'new AggregateError([],"'+t.m+'")');return e.base.stack.pop(),n}function Na(e,t){return Le(e,t,"new "+$t[t.s]+'("'+t.m+'")')}function La(e,t){let r,n=t.f,a=t.i,i=t.s?ua:ca,o=e.base;if(_(o,n)){let u=g(e,n.i);r=i+(t.s?"().then("+Kt([],u)+")":"().catch("+ta([],"throw "+u)+")")}else{o.stack.push(a);let u=h(e,n);o.stack.pop(),r=i+"("+u+")"}return r}function ja(e,t){return"Object("+h(e,t.f)+")"}function j(e,t){let r=h(e,t);return t.t===4?r:"("+r+")"}function Fa(e,t){if(e.mode===1)throw new N(t);return"("+M(e,t.s,j(e,t.f)+"()")+").p"}function Ua(e,t){if(e.mode===1)throw new N(t);return j(e,t.a[0])+"("+g(e,t.i)+","+h(e,t.a[1])+")"}function Ha(e,t){if(e.mode===1)throw new N(t);return j(e,t.a[0])+"("+g(e,t.i)+","+h(e,t.a[1])+")"}function Da(e,t){let r=e.base.plugins;if(r)for(let n=0,a=r.length;n<a;n++){let i=r[n];if(i.tag===t.c)return e.child==null&&(e.child=new da(e)),i.serialize(t.s,e.child,{id:t.i})}throw new jt(t.c)}function qa(e,t){let r="",n=!1;return t.f.t!==4&&(E(e.base,t.f.i),r="("+h(e,t.f)+",",n=!0),r+=M(e,t.i,"("+Vn+")("+g(e,t.f.i)+")"),n&&(r+=")"),r}function Ma(e,t){return j(e,t.a[0])+"("+h(e,t.a[1])+")"}function Ba(e,t){let r=t.a[0],n=t.a[1],a=e.base,i="";r.t!==4&&(E(a,r.i),i+="("+h(e,r)),n.t!==4&&(E(a,n.i),i+=(i?",":"(")+h(e,n)),i&&(i+=",");let o=M(e,t.i,"("+Wn+")("+g(e,n.i)+","+g(e,r.i)+")");return i?i+o+")":o}function Va(e,t){return j(e,t.a[0])+"("+h(e,t.a[1])+")"}function Wa(e,t){let r=M(e,t.i,j(e,t.f)+"()"),n=t.a.length;if(n){let a=h(e,t.a[0]);for(let i=1;i<n;i++)a+=","+h(e,t.a[i]);return"("+r+","+a+","+g(e,t.i)+")"}return r}function Xa(e,t){return g(e,t.i)+".next("+h(e,t.f)+")"}function Ga(e,t){return g(e,t.i)+".throw("+h(e,t.f)+")"}function Ya(e,t){return g(e,t.i)+".return("+h(e,t.f)+")"}function Ja(e,t){switch(t.t){case 17:return Vr[t.s];case 18:return wa(t);case 9:return va(e,t);case 10:return Sa(e,t);case 11:return Aa(e,t);case 5:return $a(t);case 6:return _a(e,t);case 7:return za(e,t);case 8:return Ca(e,t);case 19:return Pa(e,t);case 16:case 15:return Ia(e,t);case 20:return Ta(e,t);case 14:return Oa(e,t);case 13:return Na(e,t);case 12:return La(e,t);case 21:return ja(e,t);case 22:return Fa(e,t);case 25:return Da(e,t);case 26:return Kn[t.s];default:throw new N(t)}}function h(e,t){switch(t.t){case 2:return Xr[t.s];case 0:return""+t.s;case 1:return'"'+t.s+'"';case 3:return t.s+"n";case 4:return g(e,t.i);case 23:return Ua(e,t);case 24:return Ha(e,t);case 27:return qa(e,t);case 28:return Ma(e,t);case 29:return Ba(e,t);case 30:return Va(e,t);case 31:return Wa(e,t);case 32:return Xa(e,t);case 33:return Ga(e,t);case 34:return Ya(e,t);default:return M(e,t.i,Ja(e,t))}}function Ka(e,t){let r=h(e,t),n=t.i;if(n==null)return r;let a=ya(e.base),i=g(e,n),o=e.state.scopeId,u=o==null?"":ie,c=a?"("+r+","+a+i+")":r;if(u==="")return t.t===10&&!a?"("+c+")":c;let l=o==null?"()":"("+ie+'["'+x(o)+'"])';return"("+Kt([u],c)+")"+l}var Za=class{constructor(e,t){this._p=e,this.depth=t}parse(e){return S(this._p,this.depth,e)}},Qa=class{constructor(e,t){this._p=e,this.depth=t}parse(e){return S(this._p,this.depth,e)}parseWithError(e){return I(this._p,this.depth,e)}isAlive(){return this._p.state.alive}pushPendingState(){He(this._p)}popPendingState(){J(this._p)}onParse(e){D(this._p,e)}onError(e){Fe(this._p,e)}};function ei(e){return{alive:!0,pending:0,initial:!0,buffer:[],onParse:e.onParse,onError:e.onError,onDone:e.onDone}}function ti(e){return{type:2,base:ss(2,e),state:ei(e)}}function ri(e,t,r){let n=[];for(let a=0,i=r.length;a<i;a++)a in r?n[a]=S(e,t,r[a]):n[a]=0;return n}function ni(e,t,r,n){return yn(r,n,ri(e,t,n))}function je(e,t,r){let n=Object.entries(r),a=[],i=[];for(let o=0,u=n.length;o<u;o++)a.push(x(n[o][0])),i.push(S(e,t,n[o][1]));return A in r&&(a.push(P(e.base,A)),i.push(kn(is(e.base),S(e,t,ts(r))))),k in r&&(a.push(P(e.base,k)),i.push(An(os(e.base),S(e,t,e.type===1?ee():Zn(r))))),H in r&&(a.push(P(e.base,H)),i.push(Ot(r[H]))),U in r&&(a.push(P(e.base,U)),i.push(r[U]?_t:zt)),{k:a,v:i}}function de(e,t,r,n,a){return us(r,n,a,je(e,t,n))}function si(e,t,r,n){return bn(r,S(e,t,n.valueOf()))}function ai(e,t,r,n){return wn(r,n,S(e,t,n.buffer))}function ii(e,t,r,n){return vn(r,n,S(e,t,n.buffer))}function oi(e,t,r,n){return Sn(r,n,S(e,t,n.buffer))}function Qe(e,t,r,n){let a=It(n,e.base.features);return Rn(r,n,a?je(e,t,a):s)}function ui(e,t,r,n){let a=It(n,e.base.features);return En(r,n,a?je(e,t,a):s)}function ci(e,t,r,n){let a=[],i=[];for(let[o,u]of n.entries())a.push(S(e,t,o)),i.push(S(e,t,u));return cs(e.base,r,a,i)}function li(e,t,r,n){let a=[];for(let i of n.keys())a.push(S(e,t,i));return xn(r,a)}function fi(e,t,r,n){let a=$n(r,L(e.base,4),[]);return e.type===1||(He(e),n.on({next:i=>{if(e.state.alive){let o=I(e,t,i);o&&D(e,_n(r,o))}},throw:i=>{if(e.state.alive){let o=I(e,t,i);o&&D(e,zn(r,o))}J(e)},return:i=>{if(e.state.alive){let o=I(e,t,i);o&&D(e,Cn(r,o))}J(e)}})),a}function pi(e,t,r){if(this.state.alive){let n=I(this,t,r);n&&D(this,m(23,e,s,s,s,s,s,[L(this.base,2),n],s,s,s,s)),J(this)}}function di(e,t,r){if(this.state.alive){let n=I(this,t,r);n&&D(this,m(24,e,s,s,s,s,s,[L(this.base,3),n],s,s,s,s))}J(this)}function hi(e,t,r,n){let a=Mt(e.base,{});return e.type===2&&(He(e),n.then(pi.bind(e,a,t),di.bind(e,a,t))),ls(e.base,r,a)}function mi(e,t,r,n,a){for(let i=0,o=a.length;i<o;i++){let u=a[i];if(u.parse.sync&&u.test(n))return Nt(r,u.tag,u.parse.sync(n,new Za(e,t),{id:r}))}return s}function gi(e,t,r,n,a){for(let i=0,o=a.length;i<o;i++){let u=a[i];if(u.parse.stream&&u.test(n))return Nt(r,u.tag,u.parse.stream(n,new Qa(e,t),{id:r}))}return s}function sr(e,t,r,n){let a=e.base.plugins;return a?e.type===1?mi(e,t,r,n,a):gi(e,t,r,n,a):s}function yi(e,t,r,n,a){switch(a){case Object:return de(e,t,r,n,!1);case s:return de(e,t,r,n,!0);case Date:return dn(r,n);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return Qe(e,t,r,n);case Number:case Boolean:case String:case BigInt:return si(e,t,r,n);case ArrayBuffer:return fs(e.base,r,n);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return ai(e,t,r,n);case DataView:return oi(e,t,r,n);case Map:return ci(e,t,r,n);case Set:return li(e,t,r,n)}if(a===Promise||n instanceof Promise)return hi(e,t,r,n);let i=e.base.features;if(i&32&&a===RegExp)return hn(r,n);if(i&16)switch(a){case BigInt64Array:case BigUint64Array:return ii(e,t,r,n)}if(i&1&&typeof AggregateError<"u"&&(a===AggregateError||n instanceof AggregateError))return ui(e,t,r,n);if(n instanceof Error)return Qe(e,t,r,n);if(A in n||k in n)return de(e,t,r,n,!!a);throw new ce(n)}function bi(e,t,r,n){if(Array.isArray(n))return ni(e,t,r,n);if(fe(n))return fi(e,t,r,n);let a=n.constructor;return a===Fn?S(e,t,n.replacement):sr(e,t,r,n)||yi(e,t,r,n,a)}function wi(e,t,r){let n=Oe(e.base,r);if(n.type!==0)return n.value;let a=sr(e,t,n.value,r);if(a)return a;throw new ce(r)}function S(e,t,r){if(t>=e.base.depthLimit)throw new Ft(e.base.depthLimit);switch(typeof r){case"boolean":return r?_t:zt;case"undefined":return Jr;case"string":return Ot(r);case"number":return ln(r);case"bigint":return fn(r);case"object":{if(r){let n=Oe(e.base,r);return n.type===0?bi(e,t+1,n.value,r):n.value}return Kr}case"symbol":return P(e.base,r);case"function":return wi(e,t,r);default:throw new ce(r)}}function D(e,t){e.state.initial?e.state.buffer.push(t):Ue(e,t,!1)}function Fe(e,t){if(e.state.onError)e.state.onError(t);else throw t instanceof Be?t:new Be(t)}function ar(e){e.state.onDone&&e.state.onDone()}function Ue(e,t,r){try{e.state.onParse(t,r)}catch(n){Fe(e,n)}}function He(e){e.state.pending++}function J(e){--e.state.pending<=0&&ar(e)}function I(e,t,r){try{return S(e,t,r)}catch(n){return Fe(e,n),s}}function vi(e,t){let r=I(e,0,t);r&&(Ue(e,r,!0),e.state.initial=!1,Si(e,e.state),e.state.pending<=0&&ir(e))}function Si(e,t){for(let r=0,n=t.buffer.length;r<n;r++)Ue(e,t.buffer[r],!1)}function ir(e){e.state.alive&&(ar(e),e.state.alive=!1)}function Ri(e,t){let r=Vt(t.plugins),n=ti({plugins:r,refs:t.refs,disabledFeatures:t.disabledFeatures,onParse(a,i){let o=pa({plugins:r,features:n.base.features,scopeId:t.scopeId,markedRefs:n.base.marked}),u;try{u=Ka(o,a)}catch(c){t.onError&&t.onError(c);return}t.onSerialize(u,i)},onError:t.onError,onDone:t.onDone});return vi(n,e),ir.bind(null,n)}function et(e,t={}){var r;let n=Vt(t.plugins),a=t.disabledFeatures||0,i=(r=e.f)!=null?r:63,o=ws({plugins:n,markedRefs:e.m,features:i&~a,disabledFeatures:a});return Zs(o,e.t)}function he(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var Ei={tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent>"u"?!1:e instanceof CustomEvent},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(he(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(he(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(he(e))}}},serialize(e,t){return"new CustomEvent("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new CustomEvent(t.deserialize(e.type),t.deserialize(e.options))}},ke=Ei,xi={tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException>"u"?!1:e instanceof DOMException},parse:{sync(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}},async async(e,t){return{name:await t.parse(e.name),message:await t.parse(e.message)}},stream(e,t){return{name:t.parse(e.name),message:t.parse(e.message)}}},serialize(e,t){return"new DOMException("+t.serialize(e.message)+","+t.serialize(e.name)+")"},deserialize(e,t){return new DOMException(t.deserialize(e.message),t.deserialize(e.name))}},Ae=xi;function me(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var ki={tag:"seroval-plugins/web/Event",test(e){return typeof Event>"u"?!1:e instanceof Event},parse:{sync(e,t){return{type:t.parse(e.type),options:t.parse(me(e))}},async async(e,t){return{type:await t.parse(e.type),options:await t.parse(me(e))}},stream(e,t){return{type:t.parse(e.type),options:t.parse(me(e))}}},serialize(e,t){return"new Event("+t.serialize(e.type)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Event(t.deserialize(e.type),t.deserialize(e.options))}},$e=ki,Ai={tag:"seroval-plugins/web/File",test(e){return typeof File>"u"?!1:e instanceof File},parse:{async async(e,t){return{name:await t.parse(e.name),options:await t.parse({type:e.type,lastModified:e.lastModified}),buffer:await t.parse(await e.arrayBuffer())}}},serialize(e,t){return"new File(["+t.serialize(e.buffer)+"],"+t.serialize(e.name)+","+t.serialize(e.options)+")"},deserialize(e,t){return new File([t.deserialize(e.buffer)],t.deserialize(e.name),t.deserialize(e.options))}},$i=Ai;function ge(e){let t=[];return e.forEach((r,n)=>{t.push([n,r])}),t}var X={},or=(e,t=new FormData,r=0,n=e.length,a)=>{for(;r<n;r++)a=e[r],t.append(a[0],a[1]);return t},_i={tag:"seroval-plugins/web/FormDataFactory",test(e){return e===X},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(){return or.toString()},deserialize(){return X}},zi={tag:"seroval-plugins/web/FormData",extends:[$i,_i],test(e){return typeof FormData>"u"?!1:e instanceof FormData},parse:{sync(e,t){return{factory:t.parse(X),entries:t.parse(ge(e))}},async async(e,t){return{factory:await t.parse(X),entries:await t.parse(ge(e))}},stream(e,t){return{factory:t.parse(X),entries:t.parse(ge(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.entries)+")"},deserialize(e,t){return or(t.deserialize(e.entries))}},_e=zi;function ye(e){let t=[];return e.forEach((r,n)=>{t.push([n,r])}),t}var Ci={tag:"seroval-plugins/web/Headers",test(e){return typeof Headers>"u"?!1:e instanceof Headers},parse:{sync(e,t){return t.parse(ye(e))},async async(e,t){return await t.parse(ye(e))},stream(e,t){return t.parse(ye(e))}},serialize(e,t){return"new Headers("+t.serialize(e)+")"},deserialize(e,t){return new Headers(t.deserialize(e))}},K=Ci,G={},ur=e=>new ReadableStream({start:t=>{e.on({next:r=>{try{t.enqueue(r)}catch{}},throw:r=>{t.error(r)},return:()=>{try{t.close()}catch{}}})}}),Pi={tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===G},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(){return ur.toString()},deserialize(){return G}};function tt(e){let t=ee(),r=e.getReader();async function n(){try{let a=await r.read();a.done?t.return(a.value):(t.next(a.value),await n())}catch(a){t.throw(a)}}return n().catch(()=>{}),t}var Ii={tag:"seroval/plugins/web/ReadableStream",extends:[Pi],test(e){return typeof ReadableStream>"u"?!1:e instanceof ReadableStream},parse:{sync(e,t){return{factory:t.parse(G),stream:t.parse(ee())}},async async(e,t){return{factory:await t.parse(G),stream:await t.parse(tt(e))}},stream(e,t){return{factory:t.parse(G),stream:t.parse(tt(e))}}},serialize(e,t){return"("+t.serialize(e.factory)+")("+t.serialize(e.stream)+")"},deserialize(e,t){let r=t.deserialize(e.stream);return ur(r)}},Z=Ii;function rt(e,t){return{body:t,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var Ti={tag:"seroval-plugins/web/Request",extends:[Z,K],test(e){return typeof Request>"u"?!1:e instanceof Request},parse:{async async(e,t){return{url:await t.parse(e.url),options:await t.parse(rt(e,e.body&&!e.bodyUsed?await e.clone().arrayBuffer():null))}},stream(e,t){return{url:t.parse(e.url),options:t.parse(rt(e,e.body&&!e.bodyUsed?e.clone().body:null))}}},serialize(e,t){return"new Request("+t.serialize(e.url)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Request(t.deserialize(e.url),t.deserialize(e.options))}},ze=Ti;function nt(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var Oi={tag:"seroval-plugins/web/Response",extends:[Z,K],test(e){return typeof Response>"u"?!1:e instanceof Response},parse:{async async(e,t){return{body:await t.parse(e.body&&!e.bodyUsed?await e.clone().arrayBuffer():null),options:await t.parse(nt(e))}},stream(e,t){return{body:t.parse(e.body&&!e.bodyUsed?e.clone().body:null),options:t.parse(nt(e))}}},serialize(e,t){return"new Response("+t.serialize(e.body)+","+t.serialize(e.options)+")"},deserialize(e,t){return new Response(t.deserialize(e.body),t.deserialize(e.options))}},Ce=Oi,Ni={tag:"seroval-plugins/web/URL",test(e){return typeof URL>"u"?!1:e instanceof URL},parse:{sync(e,t){return t.parse(e.href)},async async(e,t){return await t.parse(e.href)},stream(e,t){return t.parse(e.href)}},serialize(e,t){return"new URL("+t.serialize(e)+")"},deserialize(e,t){return new URL(t.deserialize(e))}},Pe=Ni,Li={tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams>"u"?!1:e instanceof URLSearchParams},parse:{sync(e,t){return t.parse(e.toString())},async async(e,t){return await t.parse(e.toString())},stream(e,t){return t.parse(e.toString())}},serialize(e,t){return"new URLSearchParams("+t.serialize(e)+")"},deserialize(e,t){return new URLSearchParams(t.deserialize(e))}},Ie=Li;function ji(e={}){let t,r=!1;const n=o=>{if(t&&t!==o)throw new Error("Context conflict")};let a;if(e.asyncContext){const o=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;o?a=new o:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(a){const o=a.getStore();if(o!==void 0)return o}return t};return{use:()=>{const o=i();if(o===void 0)throw new Error("Context is not available");return o},tryUse:()=>i(),set:(o,u)=>{u||n(o),t=o,r=!0},unset:()=>{t=void 0,r=!1},call:(o,u)=>{n(o),t=o;try{return a?a.run(o,u):u()}finally{r||(t=void 0)}},async callAsync(o,u){t=o;const c=()=>{t=o},l=()=>t===o?c:void 0;it.add(l);try{const p=a?a.run(o,u):u();return r||(t=void 0),await p}finally{it.delete(l)}}}}function Fi(e={}){const t={};return{get(r,n={}){return t[r]||(t[r]=ji({...e,...n})),t[r]}}}const oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},st="__unctx__",Ui=oe[st]||(oe[st]=Fi()),Hi=(e,t={})=>Ui.get(e,t),at="__unctx_async_handlers__",it=oe[at]||(oe[at]=new Set);function Di(e){let t;const r=lr(e),n={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(r,{...n,body:e.node.req.body}):new Request(r,{...n,get body(){return t||(t=Ki(e),t)}})}function qi(e){return e.web??={request:Di(e),url:lr(e)},e.web.request}function Mi(){return to()}const cr=Symbol("$HTTPEvent");function Bi(e){return typeof e=="object"&&(e instanceof Se||e?.[cr]instanceof Se||e?.__is_event__===!0)}function w(e){return function(...t){let r=t[0];if(Bi(r))t[0]=r instanceof Se||r.__is_event__?r:r[cr];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(r=Mi(),!r)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(r)}return e(...t)}}const lr=w(jr),Vi=w($r),ue=w(Ur),ot=w(zr),Wi=w(Cr),se=w(Lr),ut=w(Tr),Xi=w(Or),fr=w(Ar),Gi=w(_r),Yi=w(Pr),Ji=w(Ir),ae=w(kr),Ki=w(Fr),Zi=w(Nr),Qi=w(qi);function eo(){return Hi("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:Dr})}function to(){return eo().use().event}const be="Invariant Violation",{setPrototypeOf:ro=function(e,t){return e.__proto__=t,e}}=Object;class De extends Error{framesToPop=1;name=be;constructor(t=be){super(typeof t=="number"?`${be}: ${t} (see https://github.com/apollographql/invariant-packages)`:t),ro(this,De.prototype)}}function no(e,t){if(!e)throw new De(t)}const we="solidFetchEvent";function so(e){return{request:Qi(e),response:uo(e),clientAddress:Vi(e),locals:{},nativeEvent:e}}function ao(e){return{...e}}function io(e){if(!e.context[we]){const t=so(e);e.context[we]=t}return e.context[we]}function ct(e,t){for(const[r,n]of t.entries())fr(e,r,n)}class oo{event;constructor(t){this.event=t}get(t){const r=ut(this.event,t);return Array.isArray(r)?r.join(", "):r||null}has(t){return this.get(t)!==null}set(t,r){return Xi(this.event,t,r)}delete(t){return Zi(this.event,t)}append(t,r){fr(this.event,t,r)}getSetCookie(){const t=ut(this.event,"Set-Cookie");return Array.isArray(t)?t:[t]}forEach(t){return Object.entries(se(this.event)).forEach(([r,n])=>t(Array.isArray(n)?n.join(", "):n,r,this))}entries(){return Object.entries(se(this.event)).map(([t,r])=>[t,Array.isArray(r)?r.join(", "):r])[Symbol.iterator]()}keys(){return Object.keys(se(this.event))[Symbol.iterator]()}values(){return Object.values(se(this.event)).map(t=>Array.isArray(t)?t.join(", "):t)[Symbol.iterator]()}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}function uo(e){return{get status(){return ot(e)},set status(t){ue(e,t)},get statusText(){return Wi(e)},set statusText(t){ue(e,ot(e),t)},headers:new oo(e)}}const q={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function co(e={}){const t={options:e,rootNode:pr(),staticRoutesMap:{}},r=n=>e.strictTrailingSlash?n:n.replace(/\/$/,"")||"/";if(e.routes)for(const n in e.routes)lt(t,r(n),e.routes[n]);return{ctx:t,lookup:n=>lo(t,r(n)),insert:(n,a)=>lt(t,r(n),a),remove:n=>fo(t,r(n))}}function lo(e,t){const r=e.staticRoutesMap[t];if(r)return r.data;const n=t.split("/"),a={};let i=!1,o=null,u=e.rootNode,c=null;for(let l=0;l<n.length;l++){const p=n[l];u.wildcardChildNode!==null&&(o=u.wildcardChildNode,c=n.slice(l).join("/"));const d=u.children.get(p);if(d===void 0){if(u&&u.placeholderChildren.length>1){const v=n.length-l;u=u.placeholderChildren.find(f=>f.maxDepth===v)||null}else u=u.placeholderChildren[0]||null;if(!u)break;u.paramName&&(a[u.paramName]=p),i=!0}else u=d}return(u===null||u.data===null)&&o!==null&&(u=o,a[u.paramName||"_"]=c,i=!0),u?i?{...u.data,params:i?a:void 0}:u.data:null}function lt(e,t,r){let n=!0;const a=t.split("/");let i=e.rootNode,o=0;const u=[i];for(const c of a){let l;if(l=i.children.get(c))i=l;else{const p=po(c);l=pr({type:p,parent:i}),i.children.set(c,l),p===q.PLACEHOLDER?(l.paramName=c==="*"?`_${o++}`:c.slice(1),i.placeholderChildren.push(l),n=!1):p===q.WILDCARD&&(i.wildcardChildNode=l,l.paramName=c.slice(3)||"_",n=!1),u.push(l),i=l}}for(const[c,l]of u.entries())l.maxDepth=Math.max(u.length-c,l.maxDepth||0);return i.data=r,n===!0&&(e.staticRoutesMap[t]=i),i}function fo(e,t){let r=!1;const n=t.split("/");let a=e.rootNode;for(const i of n)if(a=a.children.get(i),!a)return r;if(a.data){const i=n.at(-1)||"";a.data=null,Object.keys(a.children).length===0&&a.parent&&(a.parent.children.delete(i),a.parent.wildcardChildNode=null,a.parent.placeholderChildren=[]),r=!0}return r}function pr(e={}){return{type:e.type||q.NORMAL,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function po(e){return e.startsWith("**")?q.WILDCARD:e[0]===":"||e==="*"?q.PLACEHOLDER:q.NORMAL}const dr=[{page:!0,$component:{src:"src/routes/(admin)/orders.tsx?pick=default&pick=$css",build:()=>import("../orders.js"),import:()=>import("../orders.js")},path:"/(admin)/orders",filePath:"/Volumes/SSD/projects/specloom/examples/solid-start/src/routes/(admin)/orders.tsx"},{page:!0,$component:{src:"src/routes/(admin)/posts.tsx?pick=default&pick=$css",build:()=>import("../posts.js"),import:()=>import("../posts.js")},path:"/(admin)/posts",filePath:"/Volumes/SSD/projects/specloom/examples/solid-start/src/routes/(admin)/posts.tsx"},{page:!0,$component:{src:"src/routes/(admin)/products.tsx?pick=default&pick=$css",build:()=>import("../products.js"),import:()=>import("../products.js")},path:"/(admin)/products",filePath:"/Volumes/SSD/projects/specloom/examples/solid-start/src/routes/(admin)/products.tsx"},{page:!0,$component:{src:"src/routes/(admin)/users.tsx?pick=default&pick=$css",build:()=>import("../users.js"),import:()=>import("../users.js")},path:"/(admin)/users",filePath:"/Volumes/SSD/projects/specloom/examples/solid-start/src/routes/(admin)/users.tsx"},{page:!0,$component:{src:"src/routes/(admin).tsx?pick=default&pick=$css",build:()=>import("../(admin).js"),import:()=>import("../(admin).js")},path:"/(admin)",filePath:"/Volumes/SSD/projects/specloom/examples/solid-start/src/routes/(admin).tsx"},{page:!0,$component:{src:"src/routes/index.tsx?pick=default&pick=$css",build:()=>import("../index.js"),import:()=>import("../index.js")},path:"/",filePath:"/Volumes/SSD/projects/specloom/examples/solid-start/src/routes/index.tsx"}],ho=mo(dr.filter(e=>e.page));function mo(e){function t(r,n,a,i){const o=Object.values(r).find(u=>a.startsWith(u.id+"/"));return o?(t(o.children||(o.children=[]),n,a.slice(o.id.length)),r):(r.push({...n,id:a,path:a.replace(/\([^)/]+\)/g,"").replace(/\/+/g,"/")}),r)}return e.sort((r,n)=>r.path.length-n.path.length).reduce((r,n)=>t(r,n,n.path,n.path),[])}function go(e){return e.$HEAD||e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}co({routes:dr.reduce((e,t)=>{if(!go(t))return e;let r=t.path.replace(/\([^)/]+\)/g,"").replace(/\/+/g,"/").replace(/\*([^/]*)/g,(n,a)=>`**:${a}`).split("/").map(n=>n.startsWith(":")||n.startsWith("*")?n:encodeURIComponent(n)).join("/");if(/:[^/]*\?/g.test(r))throw new Error(`Optional parameters are not supported in API routes: ${r}`);if(e[r])throw new Error(`Duplicate API routes for "${r}" found at "${e[r].route.path}" and "${t.path}"`);return e[r]={route:t},e},{})});function yo(e){e.forEach(t=>{if(!t.attrs.href)return;let r=document.head.querySelector(`link[href="${t.attrs.href}"]`);r||(r=document.createElement("link"),r.setAttribute("rel","preload"),r.setAttribute("as","style"),r.setAttribute("href",t.attrs.href),document.head.appendChild(r))})}var bo=" ";const wo={style:e=>re("style",e.attrs,()=>e.children,!0),link:e=>re("link",e.attrs,void 0,!0),script:e=>e.attrs.src?re("script",vr(()=>e.attrs,{get id(){return e.key}}),()=>Sr(bo),!0):null,noscript:e=>re("noscript",e.attrs,()=>wr(e.children),!0)};function vo(e,t){let{tag:r,attrs:{key:n,...a}={key:void 0},children:i}=e;return wo[r]({attrs:{...a,nonce:t},key:n,children:i})}function So(e,t,r,n="default"){return yr(async()=>{{const i=(await e.import())[n],u=(await t.inputs?.[e.src].assets()).filter(l=>l.tag==="style"||l.attrs.rel==="stylesheet");return typeof window<"u"&&yo(u),{default:l=>[...u.map(p=>vo(p)),br(i,l)]}}})}function hr(){function e(r){return{...r,...r.$$route?r.$$route.require().route:void 0,info:{...r.$$route?r.$$route.require().route.info:{},filesystem:!0},component:r.$component&&So(r.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:r.children?r.children.map(e):void 0}}return ho.map(e)}let ft;const Fo=Er?()=>Rr().routes:()=>ft||(ft=hr());function Ro(e){const t=Yi(e.nativeEvent,"flash");if(t)try{let r=JSON.parse(t);if(!r||!r.result)return;const n=[...r.input.slice(0,-1),new Map(r.input[r.input.length-1])],a=r.error?new Error(r.result):r.result;return{input:n,url:r.url,pending:!1,result:r.thrown?void 0:a,error:r.thrown?a:void 0}}catch(r){console.error(r)}finally{Ji(e.nativeEvent,"flash","",{maxAge:0})}}async function Eo(e){const t=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,e.response.headers.set("Content-Type","text/html"),Object.assign(e,{manifest:await t.json(),assets:[...await t.inputs[t.handler].assets()],router:{submission:Ro(e)},routes:hr(),complete:!1,$islands:new Set})}const xo=new Set([301,302,303,307,308]);function ko(e){return e.status&&xo.has(e.status)?e.status:302}const Ao={};function $o(e){const t=new TextEncoder().encode(e),r=t.length,n=r.toString(16),a="00000000".substring(0,8-n.length)+n,i=new TextEncoder().encode(`;0x${a};`),o=new Uint8Array(12+r);return o.set(i),o.set(t,12),o}function pt(e,t){return new ReadableStream({start(r){Ri(t,{scopeId:e,plugins:[ke,Ae,$e,_e,K,Z,ze,Ce,Ie,Pe],onSerialize(n,a){r.enqueue($o(a?`(${sn(e)},${n})`:n))},onDone(){r.close()},onError(n){r.error(n)}})}})}async function _o(e){const t=io(e),r=t.request,n=r.headers.get("X-Server-Id"),a=r.headers.get("X-Server-Instance"),i=r.headers.has("X-Single-Flight"),o=new URL(r.url);let u,c;if(n)no(typeof n=="string","Invalid server function"),[u,c]=n.split("#");else if(u=o.searchParams.get("id"),c=o.searchParams.get("name"),!u||!c)return new Response(null,{status:404});const l=Ao[u];let p;if(!l)return new Response(null,{status:404});p=await l.importer();const d=p[l.functionName];let v=[];if(!a||e.method==="GET"){const f=o.searchParams.get("args");if(f){const R=JSON.parse(f);(R.t?et(R,{plugins:[ke,Ae,$e,_e,K,Z,ze,Ce,Ie,Pe]}):R).forEach(te=>v.push(te))}}if(e.method==="POST"){const f=r.headers.get("content-type"),R=e.node.req,te=R instanceof ReadableStream,mr=R.body instanceof ReadableStream,qe=te&&R.locked||mr&&R.body.locked,Me=te?R:R.body;if(f?.startsWith("multipart/form-data")||f?.startsWith("application/x-www-form-urlencoded"))v.push(await(qe?r:new Request(r,{...r,body:Me})).formData());else if(f?.startsWith("application/json")){const gr=qe?r:new Request(r,{...r,body:Me});v=et(await gr.json(),{plugins:[ke,Ae,$e,_e,K,Z,ze,Ce,Ie,Pe]})}}try{let f=await gt(t,async()=>(mt.context={event:t},t.locals.serverFunctionMeta={id:u+"#"+c},d(...v)));if(i&&a&&(f=await ht(t,f)),f instanceof Response){if(f.headers&&f.headers.has("X-Content-Raw"))return f;a&&(f.headers&&ct(e,f.headers),f.status&&(f.status<300||f.status>=400)&&ue(e,f.status),f.customBody?f=await f.customBody():f.body==null&&(f=null))}return a?(ae(e,"content-type","text/javascript"),pt(a,f)):dt(f,r,v)}catch(f){if(f instanceof Response)i&&a&&(f=await ht(t,f)),f.headers&&ct(e,f.headers),f.status&&(!a||f.status<300||f.status>=400)&&ue(e,f.status),f.customBody?f=f.customBody():f.body==null&&(f=null),ae(e,"X-Error","true");else if(a){const R=f instanceof Error?f.message:typeof f=="string"?f:"true";ae(e,"X-Error",R.replace(/[\r\n]+/g,""))}else f=dt(f,r,v,!0);return a?(ae(e,"content-type","text/javascript"),pt(a,f)):f}}function dt(e,t,r,n){const a=new URL(t.url),i=e instanceof Error;let o=302,u;return e instanceof Response?(u=new Headers(e.headers),e.headers.has("Location")&&(u.set("Location",new URL(e.headers.get("Location"),a.origin+"").toString()),o=ko(e))):u=new Headers({Location:new URL(t.headers.get("referer")).toString()}),e&&u.append("Set-Cookie",`flash=${encodeURIComponent(JSON.stringify({url:a.pathname+a.search,result:i?e.message:e,thrown:n,error:i,input:[...r.slice(0,-1),[...r[r.length-1].entries()]]}))}; Secure; HttpOnly;`),new Response(null,{status:o,headers:u})}let ve;function zo(e){const t=new Headers(e.request.headers),r=Gi(e.nativeEvent),n=e.response.headers.getSetCookie();t.delete("cookie");let a=!1;return e.nativeEvent.node?.req&&(a=!0,e.nativeEvent.node.req.headers.cookie=""),n.forEach(i=>{if(!i)return;const{maxAge:o,expires:u,name:c,value:l}=qr(i);if(o!=null&&o<=0){delete r[c];return}if(u!=null&&u.getTime()<=Date.now()){delete r[c];return}r[c]=l}),Object.entries(r).forEach(([i,o])=>{t.append("cookie",`${i}=${o}`),a&&(e.nativeEvent.node.req.headers.cookie+=`${i}=${o};`)}),t}async function ht(e,t){let r,n=new URL(e.request.headers.get("referer")).toString();t instanceof Response&&(t.headers.has("X-Revalidate")&&(r=t.headers.get("X-Revalidate").split(",")),t.headers.has("Location")&&(n=new URL(t.headers.get("Location"),new URL(e.request.url).origin+"").toString()));const a=ao(e);return a.request=new Request(n,{headers:zo(e)}),await gt(a,async()=>{await Eo(a),ve||(ve=(await import("./app-qbLpREiu.js")).default),a.router.dataOnly=r||!0,a.router.previousUrl=e.request.headers.get("referer");try{xr(()=>{mt.context.event=a,ve()})}catch(u){console.log(u)}const i=a.router.data;if(!i)return t;let o=!1;for(const u in i)i[u]===void 0?delete i[u]:o=!0;return o&&(t instanceof Response?t.customBody&&(i._$value=t.customBody()):(i._$value=t,t=new Response(null,{status:200})),t.customBody=()=>i,t.headers.set("X-Single-Flight","true")),t})}const Uo=Hr(_o);export{Fo as F,Uo as h};
