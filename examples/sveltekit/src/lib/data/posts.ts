import type { ListViewModel, ShowViewModel, FormViewModel } from "specloom";

export const postsData = [
  {
    id: "1",
    title: "SvelteKitの始め方",
    slug: "getting-started-sveltekit",
    author: "田中太郎",
    category: "tech",
    published: true,
    publishedAt: "2024-11-15",
    views: 1250,
  },
  {
    id: "2",
    title: "TypeScript 5.0 新機能まとめ",
    slug: "typescript-5-features",
    author: "佐藤花子",
    category: "tech",
    published: true,
    publishedAt: "2024-10-20",
    views: 3420,
  },
  {
    id: "3",
    title: "効率的なコードレビューの方法",
    slug: "effective-code-review",
    author: "鈴木一郎",
    category: "process",
    published: false,
    publishedAt: null,
    views: 0,
  },
  {
    id: "4",
    title: "チームビルディングのコツ",
    slug: "team-building-tips",
    author: "高橋美咲",
    category: "management",
    published: true,
    publishedAt: "2024-12-01",
    views: 890,
  },
];

const categoryOptions = [
  { value: "tech", label: "技術" },
  { value: "process", label: "プロセス" },
  { value: "management", label: "マネジメント" },
  { value: "news", label: "ニュース" },
];

export const postsListVM: ListViewModel = {
  type: "list",
  resource: "posts",
  label: "記事一覧",
  fields: [
    { name: "title", label: "タイトル", kind: "text", sortable: true },
    { name: "author", label: "著者", kind: "text", sortable: true },
    {
      name: "category",
      label: "カテゴリ",
      kind: "enum",
      sortable: true,
      options: categoryOptions,
    },
    { name: "published", label: "公開", kind: "boolean" },
    { name: "publishedAt", label: "公開日", kind: "date", sortable: true },
    { name: "views", label: "閲覧数", kind: "number", sortable: true },
  ],
  rows: postsData.map((post) => ({
    id: post.id,
    values: post,
    actions: [
      { id: "edit", label: "編集", allowed: true },
      { id: "preview", label: "プレビュー", allowed: true },
      { id: "publish", label: "公開", allowed: !post.published },
      {
        id: "unpublish",
        label: "非公開",
        allowed: post.published,
        confirm: "非公開にしますか？",
      },
    ],
  })),
  pageActions: [
    {
      id: "create",
      label: "新規作成",
      allowed: true,
      ui: { variant: "primary" },
    },
  ],
  bulkActions: [
    { id: "bulk-publish", label: "一括公開", allowed: true },
    {
      id: "bulk-delete",
      label: "一括削除",
      allowed: true,
      confirm: "選択した記事を削除しますか？",
      ui: { variant: "danger" },
    },
  ],
  filters: { named: [] },
  selection: { mode: "multi", selected: [] },
  search: { fields: ["title", "author"], query: "" },
  defaultSort: { field: "publishedAt", order: "desc" },
  clickAction: "show",
};

export const postsShowVM: ShowViewModel = {
  type: "show",
  resource: "posts",
  label: "記事詳細",
  id: "1",
  fields: [
    {
      name: "title",
      label: "タイトル",
      kind: "text",
      value: "SvelteKitの始め方",
    },
    {
      name: "slug",
      label: "スラッグ",
      kind: "text",
      value: "getting-started-sveltekit",
    },
    { name: "author", label: "著者", kind: "text", value: "田中太郎" },
    {
      name: "category",
      label: "カテゴリ",
      kind: "enum",
      value: "tech",
      options: categoryOptions,
    },
    { name: "published", label: "公開状態", kind: "boolean", value: true },
    { name: "publishedAt", label: "公開日", kind: "date", value: "2024-11-15" },
    { name: "views", label: "閲覧数", kind: "number", value: 1250 },
  ],
  actions: [
    { id: "edit", label: "編集", allowed: true, ui: { variant: "primary" } },
    { id: "preview", label: "プレビュー", allowed: true },
  ],
};

export const postsFormVM: FormViewModel = {
  type: "form",
  resource: "posts",
  label: "記事編集",
  mode: "edit",
  id: "1",
  fields: [
    {
      name: "title",
      label: "タイトル",
      kind: "text",
      value: "SvelteKitの始め方",
      required: true,
      readonly: false,
      errors: [],
      placeholder: "記事タイトル",
    },
    {
      name: "slug",
      label: "スラッグ",
      kind: "text",
      value: "getting-started-sveltekit",
      required: true,
      readonly: false,
      errors: [],
      hint: "URLに使用されます（英数字とハイフンのみ）",
    },
    {
      name: "category",
      label: "カテゴリ",
      kind: "enum",
      value: "tech",
      required: true,
      readonly: false,
      errors: [],
      options: categoryOptions,
    },
    {
      name: "content",
      label: "本文",
      kind: "textarea",
      value: "# SvelteKitとは\n\nSvelteKitは...",
      required: true,
      readonly: false,
      errors: [],
      placeholder: "Markdown形式で入力",
    },
    {
      name: "published",
      label: "公開する",
      kind: "boolean",
      value: true,
      required: false,
      readonly: false,
      errors: [],
    },
  ],
  actions: [
    { id: "preview", label: "プレビュー", allowed: true },
    { id: "cancel", label: "キャンセル", allowed: true },
  ],
  isValid: true,
  isDirty: false,
};
