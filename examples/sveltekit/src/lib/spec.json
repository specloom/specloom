{
  "version": "0.1",
  "resources": [
    {
      "name": "User",
      "fields": [
        {
          "name": "id",
          "type": "string",
          "readonly": true
        },
        {
          "name": "name",
          "type": "string",
          "label": "名前",
          "required": true,
          "validation": {
            "required": true
          }
        }
      ],
      "label": "ユーザー"
    },
    {
      "name": "Tag",
      "fields": [
        {
          "name": "id",
          "type": "string",
          "readonly": true
        },
        {
          "name": "name",
          "type": "string",
          "label": "タグ名",
          "required": true,
          "validation": {
            "required": true
          }
        }
      ],
      "label": "タグ"
    },
    {
      "name": "Post",
      "fields": [
        {
          "name": "id",
          "type": "string",
          "readonly": true
        },
        {
          "name": "title",
          "type": "string",
          "label": "タイトル",
          "kind": "text",
          "required": true,
          "validation": {
            "required": true,
            "maxLength": 100
          }
        },
        {
          "name": "body",
          "type": "string",
          "label": "本文",
          "kind": "longText",
          "ui": {
            "inputHint": "richtext"
          }
        },
        {
          "name": "status",
          "type": "string",
          "label": "状態",
          "kind": "enum",
          "options": [
            {
              "value": "draft",
              "label": "下書き"
            },
            {
              "value": "published",
              "label": "公開中"
            },
            {
              "value": "archived",
              "label": "アーカイブ"
            }
          ],
          "ui": {
            "hint": "badge",
            "inputHint": "select"
          }
        },
        {
          "name": "priority",
          "type": "string",
          "label": "優先度",
          "kind": "enum",
          "options": [
            {
              "value": "low",
              "label": "低"
            },
            {
              "value": "medium",
              "label": "中"
            },
            {
              "value": "high",
              "label": "高"
            }
          ]
        },
        {
          "name": "category",
          "type": "string",
          "label": "カテゴリ",
          "kind": "enum",
          "options": [
            {
              "value": "tech",
              "label": "テクノロジー"
            },
            {
              "value": "life",
              "label": "ライフスタイル"
            },
            {
              "value": "news",
              "label": "ニュース"
            }
          ]
        },
        {
          "name": "author",
          "type": "User",
          "label": "著者",
          "kind": "relation",
          "required": true,
          "relation": {
            "resource": "User",
            "labelField": "name"
          },
          "ui": {
            "hint": "avatar",
            "inputHint": "autocomplete"
          },
          "validation": {
            "required": true
          }
        },
        {
          "name": "tags",
          "type": "Tag[]",
          "label": "タグ",
          "kind": "relation",
          "relation": {
            "resource": "Tag",
            "labelField": "name"
          },
          "validation": {
            "minItems": 1,
            "maxItems": 5
          }
        },
        {
          "name": "createdAt",
          "type": "datetime",
          "label": "作成日時",
          "kind": "datetime",
          "readonly": true
        }
      ],
      "label": "投稿"
    }
  ],
  "views": [
    {
      "resource": "Post",
      "type": "list",
      "actions": [
        {
          "id": "create",
          "label": "新規作成",
          "placement": "header",
          "allowedWhen": "role == 'admin' || role == 'editor'",
          "ui": {
            "icon": "plus",
            "variant": "primary"
          }
        },
        {
          "id": "edit",
          "label": "編集",
          "placement": "row",
          "allowedWhen": "role == 'admin' || role == 'editor'",
          "ui": {
            "icon": "pencil"
          }
        },
        {
          "id": "delete",
          "label": "削除",
          "placement": "row",
          "allowedWhen": "role == 'admin'",
          "confirm": "本当に削除しますか？",
          "ui": {
            "icon": "trash",
            "variant": "danger"
          }
        },
        {
          "id": "bulkDelete",
          "label": "一括削除",
          "placement": "bulk",
          "allowedWhen": "role == 'admin'",
          "confirm": "選択した項目を削除しますか？"
        }
      ],
      "columns": [
        "title",
        "status",
        "author",
        "createdAt"
      ],
      "searchable": [
        "title"
      ],
      "sortable": [
        "title",
        "createdAt"
      ],
      "defaultSort": {
        "field": "createdAt",
        "order": "desc"
      },
      "clickAction": "show",
      "selection": "multi"
    },
    {
      "resource": "Post",
      "type": "form",
      "actions": [
        {
          "id": "save",
          "label": "保存",
          "placement": "header",
          "ui": {
            "icon": "check",
            "variant": "primary"
          }
        },
        {
          "id": "cancel",
          "label": "キャンセル",
          "placement": "header"
        }
      ],
      "fields": [
        "title",
        "body",
        "status",
        "priority",
        "category",
        "author",
        "tags"
      ]
    },
    {
      "resource": "Post",
      "type": "show",
      "actions": [
        {
          "id": "edit",
          "label": "編集",
          "placement": "header",
          "allowedWhen": "role == 'admin' || role == 'editor'",
          "ui": {
            "icon": "pencil"
          }
        },
        {
          "id": "delete",
          "label": "削除",
          "placement": "header",
          "allowedWhen": "role == 'admin'",
          "confirm": "本当に削除しますか？",
          "ui": {
            "icon": "trash",
            "variant": "danger"
          }
        }
      ],
      "fields": [
        "title",
        "body",
        "status",
        "priority",
        "category",
        "author",
        "tags",
        "createdAt"
      ]
    }
  ]
}
